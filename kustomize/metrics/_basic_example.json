{
    "telemetry_url": "https://prometheus:9090/v1/api/query",
    "format": "prometheus",
    "metrics": [
        {
            "name": "request_count",
            "params": {
                "query": "sum(increase(revision_app_request_latencies_count{service_name=~'.*$name'}[$interval]))"
            }
        },
        {
            "name": "mean_latency",
            "params": {
                "query": "(sum(increase(revision_app_request_latencies_sum{service_name=~'.*$name'}[$interval])) or vector(0)) / (sum(increase(revision_app_request_latencies_count{service_name=~'.*$name'}[$interval]))"
            }
        },
        {
            "name": "95th_percentile_tail_latency",
            "params": {
                "query": "query=histogram_quantile(0.95, sum(rate(revision_app_request_latencies_bucket{service_name=~'.*$name'}[$interval])) by (le))"
            }
        }, 
        {
            "name": "error_count",
            "params": {
                "query": "sum(increase(revision_app_request_latencies_count{response_code_class!='2xx', service_name=~'.*$name'}[$interval]))"
            },
            "format": "my_formatter"
        },
        {
            "name": "error_rate",
            "params": {
                "query": "(sum(increase(revision_app_request_latencies_count{response_code_class!='2xx', service_name=~'.*$name'}[$interval]))) / (sum(increase(revision_app_request_latencies_count{service_name=~'.*$name'}[$interval])))"
            }
        }
    ]
}