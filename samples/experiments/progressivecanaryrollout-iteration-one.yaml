apiVersion: iter8.tools/v1alpha3
kind: Experiment
metadata:
  name: sklearn-iris-experiment-12
spec:
  targetKey: sklearn-iris # ignore in MVP demo
  criteria:
    indicators:
    - 95th_percentile_tail_latency
    - container_throttled_seconds_total
    objectives:
    - metric: mean_latency
      upperLimit: 200
    - metric: error_rate
      upperLimit: 0.01
  duration:
    interval: 20s
    maxIterations: 8
  inferenceServiceRef: modelnamespace/sklearn-iris
  webhooks: # ignore in MVP demo
    end:
    - https://end.listener
    postIteration:
    - https://iteration.listerner
    start:
    - https://start.lisetener
status: # not a subresource
  iterationCount: 1
  phase: progressing
  versionSpecs:
    baseline:
      name: default
    candidates:
    - name: canary
      weightObjRef: 
        apiVersion: serving.kubeflow.org/v1alpha2
        kind: InferenceService
        name: sklearn-iris
        namespace: modelnamespaces
        fieldPath: spec.canaryTrafficPercent
  metricSpecs:
  - ...
  startTimeStamp: "2020-08-13T17:26:37Z"