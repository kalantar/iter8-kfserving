apiVersion: iter8.tools/v2alpha1
kind: Experiment
metadata:
  name: sklearn-iris-experiment-3
spec:
  target: kfserving-test/sklearn-iris
  strategy:
    type: A/B
    handlers:
      finish: git_push
  criteria: 
    # namespaced-metric-names are searched in the namespace specified.
    # for non-namespaced-metric-names, 
    # iter8 will first search for metrics in experiment namespace
    # followed iter8-domain namespace (which could be iter8 namespace itself)
    reward:
      metric: container-memory-usage-bytes # required
      preferredDirection: lower # required; higher/lower
    indicators:
    - 95th-percentile-tail-latency
    - container-throttled-seconds-total
    objectives:
    - metric: mean-latency
      upperLimit: 200
    - metric: my-other-metric-namespace/error-rate
      upperLimit: "0.01"
  duration:
    interval: 20s
    maxIterations: 8
  webhooks:
    termination:
    - https://terminate.me